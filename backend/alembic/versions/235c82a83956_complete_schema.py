"""complete_schema

Revision ID: 235c82a83956
Revises: initial_migration
Create Date: 2025-11-18 20:09:47.789450

"""

from typing import Sequence, Union

import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

from alembic import op
from app.utils.sqids import SqidType

# revision identifiers, used by Alembic.
revision: str = "235c82a83956"
down_revision: Union[str, Sequence[str], None] = "initial_migration"
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table(
        "google_oauth_states",
        sa.Column("state", sa.String(length=255), nullable=False),
        sa.Column("redirect_uri", sa.Text(), nullable=True),
        sa.Column("expires_at", sa.DateTime(timezone=True), nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(op.f("ix_google_oauth_states_deleted_at"), "google_oauth_states", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_google_oauth_states_state"), "google_oauth_states", ["state"], unique=True)
    op.create_table(
        "sessions",
        sa.Column("session_id", sa.String(length=255), nullable=False),
        sa.Column("data", postgresql.JSONB(astext_type=sa.Text()), nullable=False),
        sa.Column("expires_at", sa.DateTime(timezone=True), nullable=False),
        sa.PrimaryKeyConstraint("session_id"),
    )
    op.create_index(op.f("ix_sessions_expires_at"), "sessions", ["expires_at"], unique=False)
    op.create_index(op.f("ix_sessions_session_id"), "sessions", ["session_id"], unique=False)
    op.create_table(
        "teams",
        sa.Column("name", sa.Text(), nullable=False),
        sa.Column("description", sa.Text(), nullable=True),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(op.f("ix_teams_deleted_at"), "teams", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_teams_name"), "teams", ["name"], unique=False)
    op.create_table(
        "users",
        sa.Column("name", sa.Text(), nullable=False),
        sa.Column("email", sa.Text(), nullable=False),
        sa.Column("email_verified", sa.Boolean(), nullable=False),
        sa.Column("state", sa.Text(), server_default="NEEDS_TEAM", nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(op.f("ix_users_deleted_at"), "users", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_users_email"), "users", ["email"], unique=True)
    op.create_index(op.f("ix_users_name"), "users", ["name"], unique=False)
    op.create_index(op.f("ix_users_state"), "users", ["state"], unique=False)
    op.create_table(
        "brands",
        sa.Column("name", sa.Text(), nullable=False),
        sa.Column("description", sa.Text(), nullable=True),
        sa.Column("website", sa.Text(), nullable=True),
        sa.Column("email", sa.Text(), nullable=True),
        sa.Column("phone", sa.Text(), nullable=True),
        sa.Column("notes", sa.Text(), nullable=True),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(op.f("ix_brands_deleted_at"), "brands", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_brands_team_id"), "brands", ["team_id"], unique=False)
    op.create_index("ix_brands_team_id_name_lower", "brands", ["team_id", "name"], unique=True)
    op.create_table(
        "dashboards",
        sa.Column("name", sa.Text(), nullable=False),
        sa.Column(
            "config", postgresql.JSONB(astext_type=sa.Text()), server_default=sa.text("'{}'::jsonb"), nullable=False
        ),
        sa.Column(
            "owner_type",
            sa.Enum("user", "team", name="dashboardownertype", native_enum=False, length=10),
            nullable=False,
        ),
        sa.Column("user_id", SqidType(), nullable=True),
        sa.Column("team_id", SqidType(), nullable=True),
        sa.Column("is_default", sa.Boolean(), server_default=sa.text("false"), nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.CheckConstraint(
            "(owner_type = 'user' AND user_id IS NOT NULL AND team_id IS NULL) OR (owner_type = 'team' AND team_id IS NOT NULL AND user_id IS NULL)",
            name="check_owner_type_matches",
        ),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="CASCADE"),
        sa.ForeignKeyConstraint(["user_id"], ["users.id"], ondelete="CASCADE"),
        sa.PrimaryKeyConstraint("id"),
        sa.UniqueConstraint("team_id", "name", name="unique_team_dashboard_name"),
        sa.UniqueConstraint("user_id", "name", name="unique_user_dashboard_name"),
    )
    op.create_index(op.f("ix_dashboards_deleted_at"), "dashboards", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_dashboards_name"), "dashboards", ["name"], unique=False)
    op.create_index(op.f("ix_dashboards_owner_type"), "dashboards", ["owner_type"], unique=False)
    op.create_index(op.f("ix_dashboards_team_id"), "dashboards", ["team_id"], unique=False)
    op.create_index(op.f("ix_dashboards_user_id"), "dashboards", ["user_id"], unique=False)
    op.create_table(
        "email_messages",
        sa.Column("to_email", sa.Text(), nullable=False),
        sa.Column("from_email", sa.Text(), nullable=False),
        sa.Column("reply_to_email", sa.Text(), nullable=True),
        sa.Column("subject", sa.Text(), nullable=False),
        sa.Column("body_html", sa.Text(), nullable=False),
        sa.Column("body_text", sa.Text(), nullable=False),
        sa.Column("ses_message_id", sa.Text(), nullable=True),
        sa.Column("sent_at", sa.DateTime(), nullable=True),
        sa.Column("template_name", sa.Text(), nullable=True),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.PrimaryKeyConstraint("id"),
        sa.UniqueConstraint("ses_message_id"),
    )
    op.create_index(op.f("ix_email_messages_deleted_at"), "email_messages", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_email_messages_team_id"), "email_messages", ["team_id"], unique=False)
    op.create_table(
        "events",
        sa.Column("actor_id", SqidType(), nullable=False),
        sa.Column("object_type", sa.String(length=50), nullable=False),
        sa.Column("object_id", sa.Integer(), nullable=False),
        sa.Column(
            "event_type",
            sa.Enum("CREATED", "UPDATED", "DELETED", "STATE_CHANGED", "CUSTOM", name="eventtype"),
            nullable=False,
        ),
        sa.Column("event_data", postgresql.JSONB(astext_type=sa.Text()), nullable=True),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(
            ["actor_id"],
            ["users.id"],
        ),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index("ix_events_actor", "events", ["actor_id", "created_at"], unique=False)
    op.create_index(op.f("ix_events_actor_id"), "events", ["actor_id"], unique=False)
    op.create_index(op.f("ix_events_deleted_at"), "events", ["deleted_at"], unique=False)
    op.create_index("ix_events_team_created", "events", ["team_id", "created_at"], unique=False)
    op.create_index(op.f("ix_events_team_id"), "events", ["team_id"], unique=False)
    op.create_index(
        "ix_events_team_object", "events", ["team_id", "object_type", "object_id", "created_at"], unique=False
    )
    op.create_table(
        "google_oauth_accounts",
        sa.Column("user_id", SqidType(), nullable=False),
        sa.Column("google_id", sa.String(length=255), nullable=False),
        sa.Column("email", sa.String(length=255), nullable=False),
        sa.Column("name", sa.String(length=255), nullable=False),
        sa.Column("picture", sa.Text(), nullable=True),
        sa.Column("access_token", sa.Text(), nullable=False),
        sa.Column("refresh_token", sa.Text(), nullable=True),
        sa.Column("token_expires_at", sa.DateTime(timezone=True), nullable=True),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["users.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(op.f("ix_google_oauth_accounts_deleted_at"), "google_oauth_accounts", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_google_oauth_accounts_email"), "google_oauth_accounts", ["email"], unique=False)
    op.create_index(op.f("ix_google_oauth_accounts_google_id"), "google_oauth_accounts", ["google_id"], unique=True)
    op.create_index(op.f("ix_google_oauth_accounts_user_id"), "google_oauth_accounts", ["user_id"], unique=False)
    op.create_table(
        "inbound_emails",
        sa.Column("s3_bucket", sa.Text(), nullable=False),
        sa.Column("s3_key", sa.Text(), nullable=False),
        sa.Column("from_email", sa.Text(), nullable=True),
        sa.Column("to_email", sa.Text(), nullable=True),
        sa.Column("subject", sa.Text(), nullable=True),
        sa.Column("ses_message_id", sa.Text(), nullable=True),
        sa.Column("received_at", sa.DateTime(), nullable=False),
        sa.Column(
            "attachments_json",
            postgresql.JSONB(astext_type=sa.Text()),
            server_default=sa.text("'{}'::jsonb"),
            nullable=False,
        ),
        sa.Column("task_id", sa.Text(), nullable=True),
        sa.Column("processed_at", sa.DateTime(), nullable=True),
        sa.Column("team_id", SqidType(), nullable=True),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="SET NULL"),
        sa.PrimaryKeyConstraint("id"),
        sa.UniqueConstraint("ses_message_id"),
    )
    op.create_index(op.f("ix_inbound_emails_deleted_at"), "inbound_emails", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_inbound_emails_from_email"), "inbound_emails", ["from_email"], unique=False)
    op.create_index(op.f("ix_inbound_emails_s3_key"), "inbound_emails", ["s3_key"], unique=True)
    op.create_index(op.f("ix_inbound_emails_task_id"), "inbound_emails", ["task_id"], unique=False)
    op.create_index(op.f("ix_inbound_emails_team_id"), "inbound_emails", ["team_id"], unique=False)
    op.create_table(
        "magic_link_tokens",
        sa.Column("token_hash", sa.Text(), nullable=False),
        sa.Column("user_id", SqidType(), nullable=False),
        sa.Column("expires_at", sa.DateTime(timezone=True), nullable=False),
        sa.Column("used_at", sa.DateTime(timezone=True), nullable=True),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["user_id"], ["users.id"], ondelete="CASCADE"),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(op.f("ix_magic_link_tokens_deleted_at"), "magic_link_tokens", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_magic_link_tokens_token_hash"), "magic_link_tokens", ["token_hash"], unique=True)
    op.create_index(op.f("ix_magic_link_tokens_user_id"), "magic_link_tokens", ["user_id"], unique=False)
    op.create_table(
        "roles",
        sa.Column("user_id", SqidType(), nullable=False),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column(
            "role_level",
            sa.Enum("OWNER", "ADMIN", "MEMBER", "VIEWER", name="rolelevel", native_enum=False, length=50),
            nullable=False,
        ),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.ForeignKeyConstraint(["user_id"], ["users.id"], ondelete="CASCADE"),
        sa.PrimaryKeyConstraint("id"),
        sa.UniqueConstraint("user_id", "team_id", name="uq_user_team"),
    )
    op.create_index(op.f("ix_roles_deleted_at"), "roles", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_roles_team_id"), "roles", ["team_id"], unique=False)
    op.create_index(op.f("ix_roles_user_id"), "roles", ["user_id"], unique=False)
    op.create_table(
        "roster",
        sa.Column("user_id", SqidType(), nullable=False),
        sa.Column("name", sa.Text(), nullable=False),
        sa.Column("email", sa.Text(), nullable=True),
        sa.Column("phone", sa.Text(), nullable=True),
        sa.Column("birthdate", sa.Date(), nullable=True),
        sa.Column("instagram_handle", sa.Text(), nullable=True),
        sa.Column("facebook_handle", sa.Text(), nullable=True),
        sa.Column("tiktok_handle", sa.Text(), nullable=True),
        sa.Column("youtube_channel", sa.Text(), nullable=True),
        sa.Column("profile_photo_id", SqidType(), nullable=True),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("state", sa.Text(), server_default="PROSPECT", nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(
            ["profile_photo_id"], ["media.id"], name="fk_roster_profile_photo", ondelete="SET NULL", use_alter=True
        ),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.ForeignKeyConstraint(["user_id"], ["users.id"], ondelete="CASCADE"),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(op.f("ix_roster_deleted_at"), "roster", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_roster_email"), "roster", ["email"], unique=False)
    op.create_index(op.f("ix_roster_facebook_handle"), "roster", ["facebook_handle"], unique=False)
    op.create_index(op.f("ix_roster_instagram_handle"), "roster", ["instagram_handle"], unique=False)
    op.create_index(op.f("ix_roster_name"), "roster", ["name"], unique=False)
    op.create_index(op.f("ix_roster_profile_photo_id"), "roster", ["profile_photo_id"], unique=False)
    op.create_index(op.f("ix_roster_state"), "roster", ["state"], unique=False)
    op.create_index(op.f("ix_roster_team_id"), "roster", ["team_id"], unique=False)
    op.create_index(op.f("ix_roster_tiktok_handle"), "roster", ["tiktok_handle"], unique=False)
    op.create_index(op.f("ix_roster_user_id"), "roster", ["user_id"], unique=False)
    op.create_index(op.f("ix_roster_youtube_channel"), "roster", ["youtube_channel"], unique=False)
    op.create_table(
        "team_invitation_tokens",
        sa.Column("token_hash", sa.Text(), nullable=False),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("invited_email", sa.Text(), nullable=False),
        sa.Column("invited_by_user_id", SqidType(), nullable=False),
        sa.Column("expires_at", sa.DateTime(timezone=True), nullable=False),
        sa.Column("accepted_at", sa.DateTime(timezone=True), nullable=True),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["invited_by_user_id"], ["users.id"], ondelete="CASCADE"),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="CASCADE"),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(
        "ix_team_invitation_pending",
        "team_invitation_tokens",
        ["team_id", "invited_email"],
        unique=True,
        postgresql_where=sa.text("accepted_at IS NULL"),
    )
    op.create_index(
        op.f("ix_team_invitation_tokens_deleted_at"), "team_invitation_tokens", ["deleted_at"], unique=False
    )
    op.create_index(
        op.f("ix_team_invitation_tokens_invited_by_user_id"),
        "team_invitation_tokens",
        ["invited_by_user_id"],
        unique=False,
    )
    op.create_index(
        op.f("ix_team_invitation_tokens_invited_email"), "team_invitation_tokens", ["invited_email"], unique=False
    )
    op.create_index(op.f("ix_team_invitation_tokens_team_id"), "team_invitation_tokens", ["team_id"], unique=False)
    op.create_index(op.f("ix_team_invitation_tokens_token_hash"), "team_invitation_tokens", ["token_hash"], unique=True)
    op.create_table(
        "threads",
        sa.Column("threadable_type", sa.Text(), nullable=False),
        sa.Column("threadable_id", sa.Integer(), nullable=False),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.PrimaryKeyConstraint("id"),
        sa.UniqueConstraint("threadable_type", "threadable_id", name="uq_thread_per_object"),
    )
    op.create_index(op.f("ix_threads_deleted_at"), "threads", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_threads_team_id"), "threads", ["team_id"], unique=False)
    op.create_index(op.f("ix_threads_threadable_id"), "threads", ["threadable_id"], unique=False)
    op.create_index(op.f("ix_threads_threadable_type"), "threads", ["threadable_type"], unique=False)
    op.create_table(
        "brand_contacts",
        sa.Column("first_name", sa.Text(), nullable=False),
        sa.Column("last_name", sa.Text(), nullable=False),
        sa.Column("email", sa.Text(), nullable=True),
        sa.Column("phone", sa.Text(), nullable=True),
        sa.Column("notes", sa.Text(), nullable=True),
        sa.Column("brand_id", SqidType(), nullable=False),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(
            ["brand_id"],
            ["brands.id"],
        ),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(op.f("ix_brand_contacts_deleted_at"), "brand_contacts", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_brand_contacts_email"), "brand_contacts", ["email"], unique=False)
    op.create_index(op.f("ix_brand_contacts_team_id"), "brand_contacts", ["team_id"], unique=False)
    op.create_table(
        "campaigns",
        sa.Column("name", sa.Text(), nullable=False),
        sa.Column("description", sa.Text(), nullable=True),
        sa.Column("counterparty_type", sa.Enum("AGENCY", "BRAND", name="counterpartytype"), nullable=True),
        sa.Column("counterparty_name", sa.String(length=255), nullable=True),
        sa.Column("counterparty_email", sa.String(length=255), nullable=True),
        sa.Column(
            "compensation_structure",
            sa.Enum("FLAT_FEE", "PER_DELIVERABLE", "PERFORMANCE_BASED", name="compensationstructure"),
            nullable=True,
        ),
        sa.Column("compensation_total_usd", sa.Float(), nullable=True),
        sa.Column("payment_terms_days", sa.Integer(), nullable=True),
        sa.Column("flight_start_date", sa.Date(), nullable=True),
        sa.Column("flight_end_date", sa.Date(), nullable=True),
        sa.Column("ftc_string", sa.String(length=255), nullable=True),
        sa.Column("usage_duration", sa.String(length=128), nullable=True),
        sa.Column("usage_territory", sa.String(length=128), nullable=True),
        sa.Column("usage_paid_media_option", sa.Boolean(), nullable=True),
        sa.Column("exclusivity_category", sa.String(length=128), nullable=True),
        sa.Column("exclusivity_days_before", sa.Integer(), nullable=True),
        sa.Column("exclusivity_days_after", sa.Integer(), nullable=True),
        sa.Column(
            "ownership_mode", sa.Enum("BRAND_OWNED", "CREATOR_OWNED", "SHARED", name="ownershipmode"), nullable=True
        ),
        sa.Column("approval_rounds", sa.Integer(), nullable=True),
        sa.Column("approval_sla_hours", sa.Integer(), nullable=True),
        sa.Column("assigned_roster_id", SqidType(), nullable=True),
        sa.Column("brand_id", SqidType(), nullable=False),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("state", sa.Text(), server_default="DRAFT", nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(
            ["assigned_roster_id"],
            ["roster.id"],
        ),
        sa.ForeignKeyConstraint(
            ["brand_id"],
            ["brands.id"],
        ),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(op.f("ix_campaigns_deleted_at"), "campaigns", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_campaigns_state"), "campaigns", ["state"], unique=False)
    op.create_index(op.f("ix_campaigns_team_id"), "campaigns", ["team_id"], unique=False)
    op.create_table(
        "thread_read_statuses",
        sa.Column("thread_id", SqidType(), nullable=False),
        sa.Column("user_id", SqidType(), nullable=False),
        sa.Column("read_at", sa.DateTime(timezone=True), nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["thread_id"], ["threads.id"], ondelete="CASCADE"),
        sa.ForeignKeyConstraint(["user_id"], ["users.id"], ondelete="CASCADE"),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(
        "ix_thread_read_status_lookup", "thread_read_statuses", ["thread_id", "user_id", "read_at"], unique=False
    )
    op.create_index(op.f("ix_thread_read_statuses_deleted_at"), "thread_read_statuses", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_thread_read_statuses_thread_id"), "thread_read_statuses", ["thread_id"], unique=False)
    op.create_index(op.f("ix_thread_read_statuses_user_id"), "thread_read_statuses", ["user_id"], unique=False)
    op.create_table(
        "thread_viewer_events",
        sa.Column("thread_id", SqidType(), nullable=False),
        sa.Column("user_id", SqidType(), nullable=False),
        sa.Column("event_type", sa.String(length=10), nullable=False),
        sa.Column("user_name", sa.Text(), nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["thread_id"], ["threads.id"], ondelete="CASCADE"),
        sa.ForeignKeyConstraint(["user_id"], ["users.id"], ondelete="CASCADE"),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(op.f("ix_thread_viewer_events_deleted_at"), "thread_viewer_events", ["deleted_at"], unique=False)
    op.create_index(
        "ix_thread_viewer_events_lookup", "thread_viewer_events", ["thread_id", "user_id", "created_at"], unique=False
    )
    op.create_index(op.f("ix_thread_viewer_events_thread_id"), "thread_viewer_events", ["thread_id"], unique=False)
    op.create_index(op.f("ix_thread_viewer_events_user_id"), "thread_viewer_events", ["user_id"], unique=False)
    op.create_table(
        "campaign_guests",
        sa.Column("user_id", SqidType(), nullable=False),
        sa.Column("campaign_id", SqidType(), nullable=False),
        sa.Column(
            "access_level",
            sa.Enum("VIEWER", "CONTRIBUTOR", name="campaignguestaccesslevel", native_enum=False, length=50),
            nullable=False,
        ),
        sa.Column("invited_by_user_id", SqidType(), nullable=True),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["campaign_id"], ["campaigns.id"], ondelete="CASCADE"),
        sa.ForeignKeyConstraint(["invited_by_user_id"], ["users.id"], ondelete="SET NULL"),
        sa.ForeignKeyConstraint(["user_id"], ["users.id"], ondelete="CASCADE"),
        sa.PrimaryKeyConstraint("id"),
        sa.UniqueConstraint("user_id", "campaign_id", name="uq_user_campaign"),
    )
    op.create_index(op.f("ix_campaign_guests_campaign_id"), "campaign_guests", ["campaign_id"], unique=False)
    op.create_index(op.f("ix_campaign_guests_deleted_at"), "campaign_guests", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_campaign_guests_user_id"), "campaign_guests", ["user_id"], unique=False)
    op.create_table(
        "campaign_lead_contacts",
        sa.Column("campaign_id", SqidType(), nullable=False),
        sa.Column("brand_contact_id", SqidType(), nullable=False),
        sa.ForeignKeyConstraint(
            ["brand_contact_id"],
            ["brand_contacts.id"],
        ),
        sa.ForeignKeyConstraint(
            ["campaign_id"],
            ["campaigns.id"],
        ),
        sa.PrimaryKeyConstraint("campaign_id", "brand_contact_id"),
    )
    op.create_table(
        "deliverables",
        sa.Column("title", sa.Text(), nullable=False),
        sa.Column("content", sa.Text(), nullable=True),
        sa.Column(
            "platforms",
            sa.Enum("INSTAGRAM", "FACEBOOK", "TIKTOK", "YOUTUBE", name="socialmediaplatforms"),
            nullable=False,
        ),
        sa.Column(
            "deliverable_type",
            sa.Enum(
                "INSTAGRAM_FEED_POST",
                "INSTAGRAM_STORY_FRAME",
                "INSTAGRAM_REEL",
                "INSTAGRAM_CAROUSEL",
                "TIKTOK_VIDEO",
                "TIKTOK_PHOTO_POST",
                "YOUTUBE_VIDEO",
                "YOUTUBE_SHORT",
                "YOUTUBE_COMMUNITY_POST",
                "FACEBOOK_POST",
                "FACEBOOK_STORY",
                "FACEBOOK_REEL",
                "BLOG_POST",
                "PODCAST_EPISODE",
                "EMAIL_NEWSLETTER",
                name="deliverabletype",
            ),
            nullable=True,
        ),
        sa.Column("count", sa.Integer(), nullable=False),
        sa.Column("posting_date", sa.DateTime(), nullable=False),
        sa.Column("posting_start_date", sa.Date(), nullable=True),
        sa.Column("posting_end_date", sa.Date(), nullable=True),
        sa.Column("handles", postgresql.ARRAY(sa.String()), nullable=True),
        sa.Column("hashtags", postgresql.ARRAY(sa.String()), nullable=True),
        sa.Column("disclosures", postgresql.ARRAY(sa.String()), nullable=True),
        sa.Column("approval_required", sa.Boolean(), nullable=False),
        sa.Column("approval_rounds", sa.Integer(), nullable=True),
        sa.Column(
            "notes", postgresql.JSONB(astext_type=sa.Text()), server_default=sa.text("'{}'::jsonb"), nullable=False
        ),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("campaign_id", SqidType(), nullable=True),
        sa.Column("state", sa.Text(), server_default="DRAFT", nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["campaign_id"], ["campaigns.id"], ondelete="RESTRICT"),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(op.f("ix_deliverables_campaign_id"), "deliverables", ["campaign_id"], unique=False)
    op.create_index(op.f("ix_deliverables_deleted_at"), "deliverables", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_deliverables_state"), "deliverables", ["state"], unique=False)
    op.create_index(op.f("ix_deliverables_team_id"), "deliverables", ["team_id"], unique=False)
    op.create_table(
        "documents",
        sa.Column("file_key", sa.Text(), nullable=False),
        sa.Column("file_name", sa.Text(), nullable=False),
        sa.Column("file_type", sa.Text(), nullable=False),
        sa.Column("file_size", sa.BigInteger(), nullable=False),
        sa.Column("mime_type", sa.Text(), nullable=False),
        sa.Column("thumbnail_key", sa.Text(), nullable=True),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("campaign_id", SqidType(), nullable=True),
        sa.Column("state", sa.Text(), server_default="PENDING", nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["campaign_id"], ["campaigns.id"], ondelete="RESTRICT"),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.PrimaryKeyConstraint("id"),
        sa.UniqueConstraint("file_key"),
    )
    op.create_index(op.f("ix_documents_campaign_id"), "documents", ["campaign_id"], unique=False)
    op.create_index(op.f("ix_documents_deleted_at"), "documents", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_documents_state"), "documents", ["state"], unique=False)
    op.create_index(op.f("ix_documents_team_id"), "documents", ["team_id"], unique=False)
    op.create_table(
        "invoices",
        sa.Column("invoice_number", sa.Integer(), nullable=False),
        sa.Column("customer_name", sa.Text(), nullable=False),
        sa.Column("customer_email", sa.Text(), nullable=False),
        sa.Column("posting_date", sa.Date(), nullable=False),
        sa.Column("due_date", sa.Date(), nullable=False),
        sa.Column("amount_due", sa.Numeric(precision=10, scale=2), nullable=False),
        sa.Column("amount_paid", sa.Numeric(precision=10, scale=2), nullable=False),
        sa.Column("description", sa.Text(), nullable=True),
        sa.Column("notes", sa.Text(), nullable=True),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("campaign_id", SqidType(), nullable=True),
        sa.Column("state", sa.Text(), server_default="DRAFT", nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["campaign_id"], ["campaigns.id"], ondelete="RESTRICT"),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.PrimaryKeyConstraint("id"),
        sa.UniqueConstraint("invoice_number"),
    )
    op.create_index(op.f("ix_invoices_campaign_id"), "invoices", ["campaign_id"], unique=False)
    op.create_index(op.f("ix_invoices_deleted_at"), "invoices", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_invoices_state"), "invoices", ["state"], unique=False)
    op.create_index(op.f("ix_invoices_team_id"), "invoices", ["team_id"], unique=False)
    op.create_table(
        "media",
        sa.Column("file_key", sa.Text(), nullable=False),
        sa.Column("file_name", sa.Text(), nullable=False),
        sa.Column("file_type", sa.Text(), nullable=False),
        sa.Column("file_size", sa.BigInteger(), nullable=False),
        sa.Column("mime_type", sa.Text(), nullable=False),
        sa.Column("thumbnail_key", sa.Text(), nullable=True),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("campaign_id", SqidType(), nullable=True),
        sa.Column("state", sa.Text(), server_default="PENDING", nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["campaign_id"], ["campaigns.id"], ondelete="RESTRICT"),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.PrimaryKeyConstraint("id"),
        sa.UniqueConstraint("file_key"),
    )
    op.create_index(op.f("ix_media_campaign_id"), "media", ["campaign_id"], unique=False)
    op.create_index(op.f("ix_media_deleted_at"), "media", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_media_state"), "media", ["state"], unique=False)
    op.create_index(op.f("ix_media_team_id"), "media", ["team_id"], unique=False)
    op.create_table(
        "messages",
        sa.Column("thread_id", SqidType(), nullable=False),
        sa.Column("user_id", SqidType(), nullable=True),
        sa.Column("content", postgresql.JSONB(astext_type=sa.Text()), nullable=False),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("campaign_id", SqidType(), nullable=True),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["campaign_id"], ["campaigns.id"], ondelete="RESTRICT"),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.ForeignKeyConstraint(["thread_id"], ["threads.id"], ondelete="CASCADE"),
        sa.ForeignKeyConstraint(["user_id"], ["users.id"], ondelete="CASCADE"),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(op.f("ix_messages_campaign_id"), "messages", ["campaign_id"], unique=False)
    op.create_index(op.f("ix_messages_deleted_at"), "messages", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_messages_team_id"), "messages", ["team_id"], unique=False)
    op.create_index("ix_messages_thread_created", "messages", ["thread_id", "created_at"], unique=False)
    op.create_index(op.f("ix_messages_thread_id"), "messages", ["thread_id"], unique=False)
    op.create_index(op.f("ix_messages_user_id"), "messages", ["user_id"], unique=False)
    op.create_table(
        "payment_blocks",
        sa.Column("campaign_id", SqidType(), nullable=False),
        sa.Column("label", sa.String(length=128), nullable=True),
        sa.Column("trigger", sa.String(length=512), nullable=True),
        sa.Column("amount_usd", sa.Numeric(precision=10, scale=2), nullable=True),
        sa.Column("percent", sa.Numeric(precision=5, scale=2), nullable=True),
        sa.Column("net_days", sa.Integer(), nullable=True),
        sa.Column("order_index", sa.Integer(), nullable=False),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.CheckConstraint("(percent IS NULL) OR (percent >= 0 AND percent <= 100)", name="ck_payment_percent_0_100"),
        sa.ForeignKeyConstraint(["campaign_id"], ["campaigns.id"], ondelete="CASCADE"),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(op.f("ix_payment_blocks_campaign_id"), "payment_blocks", ["campaign_id"], unique=False)
    op.create_index("ix_payment_blocks_campaign_order", "payment_blocks", ["campaign_id", "order_index"], unique=False)
    op.create_index(op.f("ix_payment_blocks_deleted_at"), "payment_blocks", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_payment_blocks_team_id"), "payment_blocks", ["team_id"], unique=False)
    op.create_table(
        "campaign_contracts",
        sa.Column("campaign_id", SqidType(), nullable=False),
        sa.Column("document_id", SqidType(), nullable=False),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["campaign_id"], ["campaigns.id"], ondelete="CASCADE"),
        sa.ForeignKeyConstraint(["document_id"], ["documents.id"], ondelete="RESTRICT"),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.PrimaryKeyConstraint("id"),
        sa.UniqueConstraint("document_id"),
    )
    op.create_index(
        "ix_campaign_contracts_campaign_created", "campaign_contracts", ["campaign_id", "created_at"], unique=False
    )
    op.create_index(op.f("ix_campaign_contracts_campaign_id"), "campaign_contracts", ["campaign_id"], unique=False)
    op.create_index(op.f("ix_campaign_contracts_deleted_at"), "campaign_contracts", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_campaign_contracts_team_id"), "campaign_contracts", ["team_id"], unique=False)
    op.create_table(
        "deliverable_media",
        sa.Column("deliverable_id", SqidType(), nullable=False),
        sa.Column("media_id", SqidType(), nullable=False),
        sa.Column("approved_at", sa.DateTime(), nullable=True),
        sa.Column("is_featured", sa.Boolean(), server_default=sa.text("false"), nullable=False),
        sa.Column("team_id", SqidType(), nullable=False),
        sa.Column("campaign_id", SqidType(), nullable=True),
        sa.Column("id", SqidType(), autoincrement=True, nullable=False),
        sa.Column("created_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("updated_at", sa.DateTime(timezone=True), server_default=sa.text("now()"), nullable=False),
        sa.Column("deleted_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(["campaign_id"], ["campaigns.id"], ondelete="RESTRICT"),
        sa.ForeignKeyConstraint(["deliverable_id"], ["deliverables.id"], ondelete="CASCADE"),
        sa.ForeignKeyConstraint(["media_id"], ["media.id"], ondelete="CASCADE"),
        sa.ForeignKeyConstraint(["team_id"], ["teams.id"], ondelete="RESTRICT"),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_index(op.f("ix_deliverable_media_campaign_id"), "deliverable_media", ["campaign_id"], unique=False)
    op.create_index(op.f("ix_deliverable_media_deleted_at"), "deliverable_media", ["deleted_at"], unique=False)
    op.create_index(op.f("ix_deliverable_media_team_id"), "deliverable_media", ["team_id"], unique=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f("ix_deliverable_media_team_id"), table_name="deliverable_media")
    op.drop_index(op.f("ix_deliverable_media_deleted_at"), table_name="deliverable_media")
    op.drop_index(op.f("ix_deliverable_media_campaign_id"), table_name="deliverable_media")
    op.drop_table("deliverable_media")
    op.drop_index(op.f("ix_campaign_contracts_team_id"), table_name="campaign_contracts")
    op.drop_index(op.f("ix_campaign_contracts_deleted_at"), table_name="campaign_contracts")
    op.drop_index(op.f("ix_campaign_contracts_campaign_id"), table_name="campaign_contracts")
    op.drop_index("ix_campaign_contracts_campaign_created", table_name="campaign_contracts")
    op.drop_table("campaign_contracts")
    op.drop_index(op.f("ix_payment_blocks_team_id"), table_name="payment_blocks")
    op.drop_index(op.f("ix_payment_blocks_deleted_at"), table_name="payment_blocks")
    op.drop_index("ix_payment_blocks_campaign_order", table_name="payment_blocks")
    op.drop_index(op.f("ix_payment_blocks_campaign_id"), table_name="payment_blocks")
    op.drop_table("payment_blocks")
    op.drop_index(op.f("ix_messages_user_id"), table_name="messages")
    op.drop_index(op.f("ix_messages_thread_id"), table_name="messages")
    op.drop_index("ix_messages_thread_created", table_name="messages")
    op.drop_index(op.f("ix_messages_team_id"), table_name="messages")
    op.drop_index(op.f("ix_messages_deleted_at"), table_name="messages")
    op.drop_index(op.f("ix_messages_campaign_id"), table_name="messages")
    op.drop_table("messages")
    op.drop_index(op.f("ix_media_team_id"), table_name="media")
    op.drop_index(op.f("ix_media_state"), table_name="media")
    op.drop_index(op.f("ix_media_deleted_at"), table_name="media")
    op.drop_index(op.f("ix_media_campaign_id"), table_name="media")
    op.drop_table("media")
    op.drop_index(op.f("ix_invoices_team_id"), table_name="invoices")
    op.drop_index(op.f("ix_invoices_state"), table_name="invoices")
    op.drop_index(op.f("ix_invoices_deleted_at"), table_name="invoices")
    op.drop_index(op.f("ix_invoices_campaign_id"), table_name="invoices")
    op.drop_table("invoices")
    op.drop_index(op.f("ix_documents_team_id"), table_name="documents")
    op.drop_index(op.f("ix_documents_state"), table_name="documents")
    op.drop_index(op.f("ix_documents_deleted_at"), table_name="documents")
    op.drop_index(op.f("ix_documents_campaign_id"), table_name="documents")
    op.drop_table("documents")
    op.drop_index(op.f("ix_deliverables_team_id"), table_name="deliverables")
    op.drop_index(op.f("ix_deliverables_state"), table_name="deliverables")
    op.drop_index(op.f("ix_deliverables_deleted_at"), table_name="deliverables")
    op.drop_index(op.f("ix_deliverables_campaign_id"), table_name="deliverables")
    op.drop_table("deliverables")
    op.drop_table("campaign_lead_contacts")
    op.drop_index(op.f("ix_campaign_guests_user_id"), table_name="campaign_guests")
    op.drop_index(op.f("ix_campaign_guests_deleted_at"), table_name="campaign_guests")
    op.drop_index(op.f("ix_campaign_guests_campaign_id"), table_name="campaign_guests")
    op.drop_table("campaign_guests")
    op.drop_index(op.f("ix_thread_viewer_events_user_id"), table_name="thread_viewer_events")
    op.drop_index(op.f("ix_thread_viewer_events_thread_id"), table_name="thread_viewer_events")
    op.drop_index("ix_thread_viewer_events_lookup", table_name="thread_viewer_events")
    op.drop_index(op.f("ix_thread_viewer_events_deleted_at"), table_name="thread_viewer_events")
    op.drop_table("thread_viewer_events")
    op.drop_index(op.f("ix_thread_read_statuses_user_id"), table_name="thread_read_statuses")
    op.drop_index(op.f("ix_thread_read_statuses_thread_id"), table_name="thread_read_statuses")
    op.drop_index(op.f("ix_thread_read_statuses_deleted_at"), table_name="thread_read_statuses")
    op.drop_index("ix_thread_read_status_lookup", table_name="thread_read_statuses")
    op.drop_table("thread_read_statuses")
    op.drop_index(op.f("ix_campaigns_team_id"), table_name="campaigns")
    op.drop_index(op.f("ix_campaigns_state"), table_name="campaigns")
    op.drop_index(op.f("ix_campaigns_deleted_at"), table_name="campaigns")
    op.drop_table("campaigns")
    op.drop_index(op.f("ix_brand_contacts_team_id"), table_name="brand_contacts")
    op.drop_index(op.f("ix_brand_contacts_email"), table_name="brand_contacts")
    op.drop_index(op.f("ix_brand_contacts_deleted_at"), table_name="brand_contacts")
    op.drop_table("brand_contacts")
    op.drop_index(op.f("ix_threads_threadable_type"), table_name="threads")
    op.drop_index(op.f("ix_threads_threadable_id"), table_name="threads")
    op.drop_index(op.f("ix_threads_team_id"), table_name="threads")
    op.drop_index(op.f("ix_threads_deleted_at"), table_name="threads")
    op.drop_table("threads")
    op.drop_index(op.f("ix_team_invitation_tokens_token_hash"), table_name="team_invitation_tokens")
    op.drop_index(op.f("ix_team_invitation_tokens_team_id"), table_name="team_invitation_tokens")
    op.drop_index(op.f("ix_team_invitation_tokens_invited_email"), table_name="team_invitation_tokens")
    op.drop_index(op.f("ix_team_invitation_tokens_invited_by_user_id"), table_name="team_invitation_tokens")
    op.drop_index(op.f("ix_team_invitation_tokens_deleted_at"), table_name="team_invitation_tokens")
    op.drop_index(
        "ix_team_invitation_pending",
        table_name="team_invitation_tokens",
        postgresql_where=sa.text("accepted_at IS NULL"),
    )
    op.drop_table("team_invitation_tokens")
    op.drop_index(op.f("ix_roster_youtube_channel"), table_name="roster")
    op.drop_index(op.f("ix_roster_user_id"), table_name="roster")
    op.drop_index(op.f("ix_roster_tiktok_handle"), table_name="roster")
    op.drop_index(op.f("ix_roster_team_id"), table_name="roster")
    op.drop_index(op.f("ix_roster_state"), table_name="roster")
    op.drop_index(op.f("ix_roster_profile_photo_id"), table_name="roster")
    op.drop_index(op.f("ix_roster_name"), table_name="roster")
    op.drop_index(op.f("ix_roster_instagram_handle"), table_name="roster")
    op.drop_index(op.f("ix_roster_facebook_handle"), table_name="roster")
    op.drop_index(op.f("ix_roster_email"), table_name="roster")
    op.drop_index(op.f("ix_roster_deleted_at"), table_name="roster")
    op.drop_table("roster")
    op.drop_index(op.f("ix_roles_user_id"), table_name="roles")
    op.drop_index(op.f("ix_roles_team_id"), table_name="roles")
    op.drop_index(op.f("ix_roles_deleted_at"), table_name="roles")
    op.drop_table("roles")
    op.drop_index(op.f("ix_magic_link_tokens_user_id"), table_name="magic_link_tokens")
    op.drop_index(op.f("ix_magic_link_tokens_token_hash"), table_name="magic_link_tokens")
    op.drop_index(op.f("ix_magic_link_tokens_deleted_at"), table_name="magic_link_tokens")
    op.drop_table("magic_link_tokens")
    op.drop_index(op.f("ix_inbound_emails_team_id"), table_name="inbound_emails")
    op.drop_index(op.f("ix_inbound_emails_task_id"), table_name="inbound_emails")
    op.drop_index(op.f("ix_inbound_emails_s3_key"), table_name="inbound_emails")
    op.drop_index(op.f("ix_inbound_emails_from_email"), table_name="inbound_emails")
    op.drop_index(op.f("ix_inbound_emails_deleted_at"), table_name="inbound_emails")
    op.drop_table("inbound_emails")
    op.drop_index(op.f("ix_google_oauth_accounts_user_id"), table_name="google_oauth_accounts")
    op.drop_index(op.f("ix_google_oauth_accounts_google_id"), table_name="google_oauth_accounts")
    op.drop_index(op.f("ix_google_oauth_accounts_email"), table_name="google_oauth_accounts")
    op.drop_index(op.f("ix_google_oauth_accounts_deleted_at"), table_name="google_oauth_accounts")
    op.drop_table("google_oauth_accounts")
    op.drop_index("ix_events_team_object", table_name="events")
    op.drop_index(op.f("ix_events_team_id"), table_name="events")
    op.drop_index("ix_events_team_created", table_name="events")
    op.drop_index(op.f("ix_events_deleted_at"), table_name="events")
    op.drop_index(op.f("ix_events_actor_id"), table_name="events")
    op.drop_index("ix_events_actor", table_name="events")
    op.drop_table("events")
    op.drop_index(op.f("ix_email_messages_team_id"), table_name="email_messages")
    op.drop_index(op.f("ix_email_messages_deleted_at"), table_name="email_messages")
    op.drop_table("email_messages")
    op.drop_index(op.f("ix_dashboards_user_id"), table_name="dashboards")
    op.drop_index(op.f("ix_dashboards_team_id"), table_name="dashboards")
    op.drop_index(op.f("ix_dashboards_owner_type"), table_name="dashboards")
    op.drop_index(op.f("ix_dashboards_name"), table_name="dashboards")
    op.drop_index(op.f("ix_dashboards_deleted_at"), table_name="dashboards")
    op.drop_table("dashboards")
    op.drop_index("ix_brands_team_id_name_lower", table_name="brands")
    op.drop_index(op.f("ix_brands_team_id"), table_name="brands")
    op.drop_index(op.f("ix_brands_deleted_at"), table_name="brands")
    op.drop_table("brands")
    op.drop_index(op.f("ix_users_state"), table_name="users")
    op.drop_index(op.f("ix_users_name"), table_name="users")
    op.drop_index(op.f("ix_users_email"), table_name="users")
    op.drop_index(op.f("ix_users_deleted_at"), table_name="users")
    op.drop_table("users")
    op.drop_index(op.f("ix_teams_name"), table_name="teams")
    op.drop_index(op.f("ix_teams_deleted_at"), table_name="teams")
    op.drop_table("teams")
    op.drop_index(op.f("ix_sessions_session_id"), table_name="sessions")
    op.drop_index(op.f("ix_sessions_expires_at"), table_name="sessions")
    op.drop_table("sessions")
    op.drop_index(op.f("ix_google_oauth_states_state"), table_name="google_oauth_states")
    op.drop_index(op.f("ix_google_oauth_states_deleted_at"), table_name="google_oauth_states")
    op.drop_table("google_oauth_states")
    # ### end Alembic commands ###
