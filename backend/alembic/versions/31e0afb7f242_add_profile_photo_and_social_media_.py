"""add profile photo and social media handles to roster

Revision ID: 31e0afb7f242
Revises: 49406ed19c7c
Create Date: 2025-10-21 20:51:05.360894

"""

from collections.abc import Sequence

import sqlalchemy as sa

from alembic import op

# revision identifiers, used by Alembic.
revision: str = "31e0afb7f242"
down_revision: str | Sequence[str] | None = "49406ed19c7c"
branch_labels: str | Sequence[str] | None = None
depends_on: str | Sequence[str] | None = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column("roster", sa.Column("facebook_handle", sa.Text(), nullable=True))
    op.add_column("roster", sa.Column("tiktok_handle", sa.Text(), nullable=True))
    op.add_column("roster", sa.Column("youtube_channel", sa.Text(), nullable=True))
    op.add_column("roster", sa.Column("profile_photo_id", sa.Integer(), nullable=True))
    op.create_index(op.f("ix_roster_facebook_handle"), "roster", ["facebook_handle"], unique=False)
    op.create_index(op.f("ix_roster_profile_photo_id"), "roster", ["profile_photo_id"], unique=False)
    op.create_index(op.f("ix_roster_tiktok_handle"), "roster", ["tiktok_handle"], unique=False)
    op.create_index(op.f("ix_roster_youtube_channel"), "roster", ["youtube_channel"], unique=False)
    op.create_foreign_key(None, "roster", "media", ["profile_photo_id"], ["id"], ondelete="SET NULL")
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint(None, "roster", type_="foreignkey")
    op.drop_index(op.f("ix_roster_youtube_channel"), table_name="roster")
    op.drop_index(op.f("ix_roster_tiktok_handle"), table_name="roster")
    op.drop_index(op.f("ix_roster_profile_photo_id"), table_name="roster")
    op.drop_index(op.f("ix_roster_facebook_handle"), table_name="roster")
    op.drop_column("roster", "profile_photo_id")
    op.drop_column("roster", "youtube_channel")
    op.drop_column("roster", "tiktok_handle")
    op.drop_column("roster", "facebook_handle")
    # ### end Alembic commands ###
